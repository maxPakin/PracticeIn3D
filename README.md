# Разработка 3D-UI для системы безопасности на UWP
Здесь будут описаны основные требования, процесс их достижения и планы на будующую разработку.
## Техническое задание:
* **Входные данные** - пока не известно, откуда брать данные о состоянии датчиков и камер
* **3D-графика** - для отображения требуется создать дружелюбный интерфейс, чтобы пользователю было наглядно показано, где сработала сигнализация
* **Кроссплатформенность** - основной целью является *Raspberry PI*, но возможны и друге варианты
* **Пока всё...**
## Процесс разработки:
* **07.02.2020** - оговорено примерное техническое задание, создан проект на базе *UWP*
* **08.02.2020** - выбран пакет для отображения 3D-графики, а именно - *HelixToolkit для UWP (v 2.10.0)*. Создана первая сцена со светом, движением камеры и кубиком в центре экрана. К примеру, есть несколько видов света:  
**AmbientLight3D** - обтекающий свет (по-видимому, самый натуральный)  
**SpotLight3D** - направленный (центральные лучи)  
**DirectionalLight3D** - направленный (параллельные лучи)  
**PointLight3D** - точечный свет (как очень маленькое солнце)  
Ещё больше есть видов камер. Но скорей всего я буду использовать только *PerspectiveCamera* 
* **10.02.2020** - создан репозиторий на *GitHub* и описал всё это здесь
* **11.02.2020** - Нашёл подходящую либу для работы с DFX-файлами - [netDxf](https://github.com/haplokuon/netDxf). Хотел проверить на семпле и в Интернете нашёл какой-то чертёж с логотипом Apple:  
![image](https://user-images.githubusercontent.com/13965436/74277038-e5a3c500-4d27-11ea-9846-fc004f96c752.png)
![image](https://user-images.githubusercontent.com/13965436/74277168-18e65400-4d28-11ea-9211-5d0a5abf434b.png)  
После загрузки я получил объект с кучей параметров. Надо будет разобраться с теми, которые нужны
* **12.02.2020** - проверили возможность деплоя на *Raspberry PI*. Неудачно. После нескольких различных попыток решили поменять ноутбук.
* **13.02.2020** - Из кучи параметров нам понадобится Layers, Polylines и LwPolylines. Различий между Polyline и LwPolyline - нет, только в размере хранения. Пробуем объединить эти две коллекции обьектов в одну, предварительно смапив их в абстракную модельку. Теперь мы можем забыть о DXF и использовать только нашу модельку, так как больше от DXF файла нам ничего не нужно
* **14.02.2020** - Создал диалогово окно, чтобы выбрать слой, который будет загружен. Я отобразил название слоя и количество объектов в слое.  
![image](https://user-images.githubusercontent.com/13965436/74911083-f52ca900-53cc-11ea-9f1c-f4660492360a.png)  
Кстати о загруженном файле, я создал специально для тестирования файл с необходимыми кейсами: пустой слой, слой с замкнутыми полилиниями, слой с незамкнутыми полилиниями, слой с простыми линиями соответственно. Слой 0 удалить или переименовать нельзя :/
* **15.02.2020** - Решил сразу поменять оси местами. Дело в том, что оси изначально расположены так, чтобы Y был вверх, а мне нужно, чтобы был Z. Также надо поменять местами X и Y, чтобы модельки не отрисовывались наоборот. Для этого повернём камеру набок:
```
Camera.UpDirection = Vector3.UnitZ
```
И включим этот параметр, чтобы поменять оси местами:
```
Camera.CreateLeftHandSystem = true
```
Теперь оси в удобном положении:  
![image](https://user-images.githubusercontent.com/13965436/74911872-9ff19700-53ce-11ea-9561-b85542474470.png)  
Также не хочется ставить кучу источников света, поэтому заставим двигаться какой-то постоянный источник вигаться за нами. Будем одновлять позицию света при каждой отрисовке. Для этого используем события OnRender у Viewport3DX:  
```
private void OnOnRendered(object sender, EventArgs e)
{
  _light.Position = Camera.Position;
}
```
* **16.02.2020** - При выборе слоя добавил превью этого слоя
* **17.02.2020** - 
* **18.02.2020** - 
* **19.02.2020** - 
* **20.02.2020** - 
## Планы:
